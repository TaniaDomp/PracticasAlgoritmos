/*Tania Ariadna Dominguez Palma
 * 29/oct/2021
 * Describe una persona vacunada
 */
public class Persona {
	private String nombre;
	private String curp;
	private char genero;
	private int ahoNac;
	private String origen;
	private String [] vacunas;
	private int numVacunas;
	private final int MAX_VAC = 10;
	
	public Persona(String curp) {
		String ahoStr; 
		
		vacunas = new String[MAX_VAC];
		numVacunas = 0;
		this.curp = curp.toUpperCase();
		origen = this.curp.substring(11, 13);
		ahoStr = this.curp.substring(4, 6);
		ahoNac = Integer.parseInt(ahoStr);
		if(ahoNac < 20) {
			ahoNac+=2000;
		}
		else {
			ahoNac+=1900;
		}
		genero = this.curp.charAt(10);
	}

	public Persona(String nombre, String curp) {
		this(curp);
		this.nombre = nombre;
	}

	public String getNombre() {
		return nombre;
	}

	public String getCurp() {
		return curp;
	}

	public char getGenero() {
		return genero;
	}

	public int getAhoNac() {
		return ahoNac;
	}

	public String getOrigen() {
		return origen;
	}

	public String getUnaVacunas(int pos) {
		String nomVac = "Vacuna no registrada";
		
		if (pos >= 0 && pos < numVacunas) {
			nomVac = vacunas[pos];
		}
		return nomVac;
	}

	public int getNumVacunas() {
		return numVacunas;
	}
	
	public int calculaEdad(int ahoActual) {
		int ed;
		
		ed = ahoActual - ahoNac;
		return ed;
	}
	
	public boolean altaVacuna(String nomVac) {
		int n;
		boolean alt;
		
		n = ManejadorArreglosGenerico.insertaEnOrden(vacunas, numVacunas, nomVac);
		if (n == MAX_VAC) {
			alt = false;
		}
		else {
			alt = true;
		}
		return alt;
	}
	
	public boolean buscaVacuna(String nomVac) {
		int pos;
		boolean bus = false;
		
		pos = ManejadorArreglosGenerico.busquedaBinaria(vacunas, numVacunas, nomVac);
		if (pos >=0) {
			bus = true;
		}
		return bus;
	}

	@Override
	public int hashCode() {
		final int prime = 31;
		int result = 1;
		result = prime * result + ((curp == null) ? 0 : curp.hashCode());
		return result;
	}

	@Override
	public boolean equals(Object obj) {
		if (this == obj)
			return true;
		if (obj == null)
			return false;
		if (getClass() != obj.getClass())
			return false;
		Persona other = (Persona) obj;
		if (curp == null) {
			if (other.curp != null)
				return false;
		} else if (!curp.equals(other.curp))
			return false;
		return true;
	}
	
	public int compareTo (Persona otro) {
		int res;
		
		if (this.curp.equals(otro.curp)) {
			res = 0;
		}
		else {
			if (this.curp.compareTo(otro.curp) > 0) {
				res = 1;
			}
			else {
				res = -1;
			}
		}
		return res;
	}
}